{% extends "base.html" %}
{% load tz %}
{% load l10n %}

{% block head_title %}Conflicts{% endblock %}

{% block content %}
    <!-- Main jumbotron for a primary marketing message or call to action -->

    <div class="jumbotron">
      <div class="container">
        <h1>Dancer Conflicts</h1>
        <b><i> Below are dancers who are wanted by more than two teams. Click on their number to see their profile. {% if isD %} A name in red indicates that you have added a conflicted dancer to your team. {% endif %}</i></b><br>
<br>
        {% if isE and readyToRandomize %}
        All teams have finished choosing dancers and there are no conflicts. To randomize training teams for dancers not chosen for any teams, click 'Randomize' below:<br>

          <form action="/randomize">
              {% csrf_token %}
              {{ form }}
              <button type="submit" class="btn btn-success">Randomize!</button>
          </form>

          {% endif %}

<br>
<br>
{% if not isE or not readyToRandomize%}

{% if dancers|length_is:"0" %}
<center>
<b>There are no conflicts! </b>
</center>
{% else %}

  <div class="newspaper">
  	{% for d in dancers%}
      {% if d in yourConflicts %}
  		<a href="/dancer/{{d.id}}"><b>{{d.id}}</b></a>: <font color="red"><b>{{d.name}}: </b></font>
        {%for t in d.team_offers%} 
          {% if isD and t.id == yourTId %}
            <b><a href="/teams/{{t.id}}">{{t.name}}</a>,</b>
          {% else %}
            <a href="/teams/{{t.id}}">{{t.name}}</a>,
          {% endif %}
         {% endfor%}
  			<br></font>
      {% else %}
      <a href="/dancer/{{d.id}}"><b>{{d.id}}</b></a>: {{d.name}}: 
        {%for t in d.team_offers%} 
          {% if isD and t.id == yourTId %}
            <b><a href="/teams/{{t.id}}">{{t.name}}</a>,</b>
          {% else %}
            <a href="/teams/{{t.id}}">{{t.name}}</a>,
          {% endif %}
         {% endfor%}
        <br>
      {% endif %}
  	{% endfor %}
  </div>

{% endif%}
      </div>
    </div>

{% endif %}

{% endblock %}